---
const pages = [
  { name: "Home", href: "/" },
  { name: "Stats", href: "/stats" },
];
---

<nav>
  {pages.map((page) => <a href={page.href}>{page.name}</a>)}
  <button id="theme-toggle" aria-label="Toggle Theme">
    <span class="sun">‚òÄÔ∏è</span>
    <span class="moon">üåô</span>
  </button>
</nav>

<script>
  function initTheme() {
    const themeBtn = document.getElementById("theme-toggle");
    if (themeBtn) {
      themeBtn.removeEventListener("click", handleToggleClick);
      themeBtn.addEventListener("click", handleToggleClick);
    }
  }

  const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle("dark");

    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  };

  initTheme();
  document.addEventListener("astro:page-load", initTheme);
  document.addEventListener("DOMContentLoaded", initTheme);
</script>

<style>
  nav {
    margin: 0;
    display: flex;
    list-style: none;
    gap: 1rem;
    align-items: center;
    justify-content: center;
  }

  a {
    text-decoration: none;
    color: var(--accent);
  }

  button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1rem;
  }

  /* Show/Hide emojis based on the theme */
  :global(html.dark) .sun {
    display: block;
  }
  :global(html.dark) .moon {
    display: none;
  }
  :global(html) .sun {
    display: none;
  }
  :global(html) .moon {
    display: block;
  }
</style>
